<!DOCTYPE html>
<html prefix="" lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="Solutions to a set of juggling notation/maths problems set by jugglinglab creator Jack Boyce.">
<meta name="viewport" content="width=device-width">
<title>Jack Boyce's Siteswap Questions | im_oisin</title>
<link rel="alternate" type="application/rss+xml" title="RSS" href="../../rss.xml">
<link rel="canonical" href="https://imois.in/posts/jack-boyces-siteswap-questions/">
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"] ],
        displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
        processEscapes: true
    },
    "HTML-CSS": {
        styles: {'.MathJax_Display': {"margin": 0}}
    }
});
</script><!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><script src="https://code.jquery.com/jquery-1.12.4.js"></script><script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui-touch-punch/0.2.3/jquery.ui.touch-punch.min.js"></script><link href="https://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/cookies-eu-banner.default.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/sudoku.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/font-awesome.min.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/rst.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/code.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/bnw.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/custom.css" rel="stylesheet" type="text/css">
<meta name="author" content="Oisin Carroll">
<meta property="og:site_name" content="im_oisin">
<meta property="og:title" content="Jack Boyce's Siteswap Questions">
<meta property="og:url" content="https://imois.in/posts/jack-boyces-siteswap-questions/">
<meta property="og:description" content="Solutions to a set of juggling notation/maths problems set by jugglinglab creator Jack Boyce.">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2019-05-06T19:47:08+01:00">
<meta property="article:tag" content="juggling">
<meta property="article:tag" content="math">
</head>
<body>

    

    <header id="header" class="navbar"><div class="container">
            
    <div class="brand">

        <div class="brand-text">
            <a href="https://imois.in/" title="im_oisin" rel="home">
                im_oisin
            </a>
        </div>

        <a id="btn-toggle-nav" class="navbar-toggle">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </a>
    </div>

            
    <nav class="navbar-collapse collapse"><ul class="nav">
<li><a href="../../archive.html">Archive</a></li>
                <li><a href="../../categories/">Tags</a></li>
                <li><a href="../../rss.xml">RSS feed</a></li>
                <li><a href="../../pages/about-me">About Me</a></li>
    
    
    </ul></nav>
</div>
    </header><div class="header-padding"> </div>

    
    <div class="post-header">
        <div class="container">
            <div class="title">
                Jack Boyce's Siteswap Questions
            </div>
        </div>
    </div>

    <div class="post-meta">
      <div class="container">
	<div class="meta clearfix">
	  <div class="authordate">
	    <time class="timeago" datetime="2019-05-06T19:47:08+01:00">2019/05/06</time><!-- 
        &nbsp;&nbsp;|&nbsp;&nbsp;
        <a href="/posts/jack-boyces-siteswap-questions/index.org" id="sourcelink">Source</a>
-->
</div>
	  <div class="post-tags">
	    <div class="tag">
	      <a href="../../categories/juggling/" rel="tag">juggling</a>
	    </div>
	    <div class="tag">
	      <a href="../../categories/math/" rel="tag">math</a>
	    </div>
	  </div>
	</div>
      </div>
    </div>


    <div id="post-main" class="main">
        <div class="container">
        <div id="outline-container-org7535a17" class="outline-2">
<h2 id="org7535a17">Intro</h2>
<div class="outline-text-2" id="text-org7535a17">
<p>
At EJC last year (2018), I came across Jack Boyce's siteswap questions, which
can be found <a href="http://www.juggling.org/help/siteswap/tests/test-boyce.html">HERE!</a> I'd highly recommend giving them a go. They start off doable,
and at the end work up to a derivation of how many siteswaps of a given length
there are.
</p>

<p>
I ended up getting a bit carried away, and writing some programs to visualize
parts of the questions, and take some ideas further. The full source for generating
the graphs can be found <a href="https://github.com/oisincar/siteswap_graph">on my Github.</a>
</p>

<p>
I wrote almost all of this at the time, but I'm only getting around to cleaning
it up and posting it now… 9 months later.
</p>
</div>
</div>

<div id="outline-container-org877c961" class="outline-2">
<h2 id="org877c961">q1</h2>
<div class="outline-text-2" id="text-org877c961">
<p>
<i>I am juggling \(868671\) with clubs (yeah, right).  How many do I have?</i>
</p>

<p>
The number of objects in a given siteswap is just the average value, I.e. The
sum of the numbers divided by the length.
</p>
<div class="highlight"><pre><span></span><span class="kr">let</span> <span class="n">ss</span> <span class="ow">=</span> <span class="p">[</span><span class="mi">8</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span>
<span class="p">(</span><span class="n">sum</span> <span class="n">ss</span><span class="p">)</span> <span class="p">`</span><span class="n">div</span><span class="p">`</span> <span class="p">(</span><span class="n">length</span> <span class="n">ss</span><span class="p">)</span>
</pre></div>

<p>
Answer: 6
</p>
</div>
</div>


<div id="outline-container-org0cc68a8" class="outline-2">
<h2 id="org0cc68a8">q2</h2>
<div class="outline-text-2" id="text-org0cc68a8">
<p>
<i>I have a bowling ball that I can only throw as a site swap '\(3\)' throw. Which</i>
<i>of the following patterns can I theoretically run, using the bowling ball in addition to 3 normal balls:</i>
</p>
<div class="org-center">
<p>
<i>a) \(53\)     b) \(6631\)    c) \(633\)    d) \(577131\)</i>
</p>
</div>

<p>
This is a question about orbits. A siteswap throw is thrown it's value number of
beats later (e.g. a \(6\) is thrown 6 beats later). Therefore we're looking for
siteswaps which have a \(3\) every 3 beats (wrapping).
</p>

<p>
This is only c).
</p>
</div>
</div>

<div id="outline-container-org1227dbf" class="outline-2">
<h2 id="org1227dbf">q3</h2>
<div class="outline-text-2" id="text-org1227dbf">
<p>
<i>You are doing a 4 ball fountain and decide you want to switch into</i>
<i>741, an excited state site swap.  You can't just start throwing:</i>
<i>4444741741… Since the last fountain throw (4) will collide with the</i>
<i>first 1 you do.  Some connecting throws are needed.  What is the</i>
<i>shortest starting sequence for 741?</i>
</p>

<p>
A 4 ball base fountain occurs in the base state of 4 balls, which can be written
as:
</p>

<pre class="example" id="orgb0607d1">
4|xxxx
</pre>

<p>
741 occurs in state:
</p>
<pre class="example" id="org103bd87">
7|xx_x__x
4|x_xx_x
1|xxx_x
</pre>

<p>
Before the 7 is thrown, we're in state <code>xxx_x</code>, which is simply a \(5\)
away from the base state.
</p>
</div>
</div>

<div id="outline-container-org6961d82" class="outline-2">
<h2 id="org6961d82">q4</h2>
<div class="outline-text-2" id="text-org6961d82">
<p>
<i>You want to get back into the fountain, from 741.  What is the</i>
<i>shortest connecting (ending) sequence in this direction?</i>
</p>

<p>
From <code>xxx_x_</code> to <code>xxxx___</code>, we can throw a \(3\).
</p>

<p>
It's not a coincidence that the the transition into \(741\) (\(5\)) and out (\(3\))
together make a valid siteswap (\(53\)). The intuition here is that you can
transition into any siteswap, repeat that siteswap any number of times, and
transition back. That includes repeating it 0 times. Therefore the transition
into and out of any siteswap must be, itself, a valid (ground state) pattern.
</p>
</div>
</div>

<div id="outline-container-org57e4d42" class="outline-2">
<h2 id="org57e4d42">q5</h2>
<div class="outline-text-2" id="text-org57e4d42">
<p>
<i>Go from the 4 ball fountain to 714.  What are the shortest</i>
<i>connecting sequences (both directions)?</i>
</p>

<p>
As before we can work out the state that 714 starts in.
</p>


<pre class="example" id="orgc6a7cc9">
7|x_xx__x
1|xxx__x
4|xx_xx
</pre>


<p>
Before the 7 is thrown, we're in state \(xx\_xx\). This is where we need our
transition to leave us. We can see it won't be possible to transition in a
single throw, so lets look at transitions of length 2.
</p>

<p>
I.e. finding the throws a, b here:
</p>
<pre class="example" id="orgf86f391">
4|xxxx
a|
b|xx_xx
</pre>
<p>
For a and b, (and therefore the transition into the pattern) both \(55\) and \(64\) work.
</p>

<p>
As for the transition back, a \(2\) works. Without having to check, we know this
will work because \(552\) and \(642\) are valid siteswaps.
</p>
</div>
</div>


<div id="outline-container-orgd38efc3" class="outline-2">
<h2 id="orgd38efc3">q6</h2>
<div class="outline-text-2" id="text-orgd38efc3">
<p>
<i>You are already doing \(741\) and want to switch directly into \(714\).</i>
<i>What is the shortest sequence for doing so?  [You could just</i>
<i>concatenate the ending sequence found in (4) above and the starting</i>
<i>sequence in (5), but this is not the shortest solution.]</i>
</p>

<p>
Here, we're looking for the transition from \(xxx\_x\) to \(xx\_xx\). This is just a
\(5\).
</p>

<p>
We can also see this by looking at the transitions we found into the siteswap.
For \(741\) we found \(5\), and for \(714\) we found \(55\). The difference here is just
an extra \(5\).
</p>
</div>
</div>

<div id="outline-container-orgfa31f32" class="outline-2">
<h2 id="orgfa31f32">q7</h2>
<div class="outline-text-2" id="text-orgfa31f32">
<p>
<i>Is the trick \(66671777161\) simple?  If not, which portion of the</i>
<i>pattern can be repeated within the larger trick?</i>
</p>

<p>
<i>Is the trick \(6316131\) simple?  If not, which portion can be repeated?</i>
</p>


<p>
Here 'simple' (more commonly 'prime') refers to simple cycles in graph theory.
These are siteswaps where each state is only visited once. We could find answers
by working out all the states in each siteswaps, and look for duplicates. If
there's any duplicate, then the siteswap isn't simple, and the throws between
these duplicated states can be repeated. This can be done by brute force as
follows by generating the table by hand. I'm too lazy to do this so I'll write a
much longer program to do it instead… :thinking:
</p>

<div class="highlight"><pre><span></span><span class="c1">-- Function mapping from current state to next state.</span>
<span class="c1">-- E.g. throw "xxxx___" 5 gives "xxx_x__"</span>
<span class="nf">throw</span> <span class="p">(</span><span class="n">x</span><span class="kt">:</span><span class="n">xs</span><span class="p">)</span> <span class="n">n</span> <span class="ow">=</span> <span class="n">before</span> <span class="o">++</span> <span class="sc">'x'</span> <span class="kt">:</span> <span class="n">after</span>
    <span class="kr">where</span> <span class="p">(</span><span class="n">before</span><span class="p">,</span> <span class="kr">_</span><span class="kt">:</span><span class="n">after</span><span class="p">)</span> <span class="ow">=</span> <span class="n">splitAt</span> <span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">(</span><span class="n">xs</span> <span class="o">++</span> <span class="s">"_"</span><span class="p">)</span>

<span class="c1">-- Juggle pattern 100 times, then take the next (length ss) state changes.</span>
<span class="c1">-- This creates a list of maps between starting state</span>
<span class="c1">-- (say, xxxx___), throw (e.g. 5), and resulting state (xxx_x__)</span>
<span class="nf">grEdges</span> <span class="n">ss</span> <span class="ow">=</span> <span class="n">take</span> <span class="p">(</span><span class="n">length</span> <span class="n">ss</span><span class="p">)</span> <span class="o">$</span> <span class="n">drop</span> <span class="p">(</span><span class="mi">100</span> <span class="o">*</span> <span class="n">length</span> <span class="n">ss</span><span class="p">)</span>
    <span class="o">$</span> <span class="n">scanl</span> <span class="n">nextEdge</span> <span class="p">(</span><span class="kt">[]</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">emptyState</span><span class="p">)</span> <span class="p">(</span><span class="n">concat</span> <span class="o">.</span> <span class="n">repeat</span> <span class="o">$</span> <span class="n">ss</span><span class="p">)</span>
    <span class="kr">where</span> <span class="n">nextEdge</span> <span class="p">(</span><span class="n">startState</span><span class="p">,</span> <span class="kr">_</span><span class="p">,</span> <span class="n">endState</span><span class="p">)</span> <span class="n">s</span> <span class="ow">=</span> <span class="p">(</span><span class="n">endState</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">throw</span> <span class="n">endState</span> <span class="n">s</span><span class="p">)</span>
	<span class="n">emptyState</span> <span class="ow">=</span> <span class="n">replicate</span> <span class="p">(</span><span class="n">maximum</span> <span class="n">ss</span><span class="p">)</span> <span class="sc">'_'</span>

<span class="c1">-- Print table for a given siteswap</span>
<span class="nf">printTable</span> <span class="n">ss</span> <span class="ow">=</span> <span class="n">putStrLn</span> <span class="o">$</span> <span class="n">unlines</span> <span class="o">$</span> <span class="n">map</span> <span class="n">showSt</span> <span class="p">(</span><span class="n">grEdges</span> <span class="n">ss</span><span class="p">)</span>
    <span class="kr">where</span> <span class="n">showSt</span> <span class="p">(</span><span class="kr">_</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">state</span><span class="p">)</span> <span class="ow">=</span> <span class="p">(</span><span class="n">show</span> <span class="n">s</span><span class="p">)</span> <span class="o">++</span> <span class="s">"|"</span> <span class="o">++</span> <span class="n">state</span>
</pre></div>

<p>
Then, we can get the tables for both siteswaps we're interested in.
</p>
<div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">printTable</span> <span class="o">$</span> <span class="n">map</span> <span class="n">digitToInt</span> <span class="s">"66671777161"</span>
<span class="mi">1</span><span class="o">|</span> <span class="n">xxxxx__</span>
<span class="mi">6</span><span class="o">|</span> <span class="n">xxxx_x_</span>
<span class="mi">6</span><span class="o">|</span> <span class="n">xxx_xx_</span>
<span class="mi">6</span><span class="o">|</span> <span class="n">xx_xxx_</span>
<span class="mi">7</span><span class="o">|</span> <span class="n">x_xxx_x</span>
<span class="mi">1</span><span class="o">|</span> <span class="n">xxxx_x_</span>
<span class="mi">7</span><span class="o">|</span> <span class="n">xxx_x_x</span>
<span class="mi">7</span><span class="o">|</span> <span class="n">xx_x_xx</span>
<span class="mi">7</span><span class="o">|</span> <span class="n">x_x_xxx</span>
<span class="mi">1</span><span class="o">|</span> <span class="n">xx_xxx_</span>
<span class="mi">6</span><span class="o">|</span> <span class="n">x_xxxx_</span>

<span class="o">&gt;</span> <span class="n">printTable</span> <span class="o">$</span> <span class="n">map</span> <span class="n">digitToInt</span> <span class="s">"6316131"</span>
<span class="mi">1</span><span class="o">|</span> <span class="n">xxx___</span>
<span class="mi">6</span><span class="o">|</span> <span class="n">xx___x</span>
<span class="mi">3</span><span class="o">|</span> <span class="n">x_x_x_</span>
<span class="mi">1</span><span class="o">|</span> <span class="n">xx_x__</span>
<span class="mi">6</span><span class="o">|</span> <span class="n">x_x__x</span>
<span class="mi">1</span><span class="o">|</span> <span class="n">xx__x_</span>
<span class="mi">3</span><span class="o">|</span> <span class="n">x_xx__</span>
</pre></div>
</div>

<div id="outline-container-orgb6c50d7" class="outline-3">
<h3 id="orgb6c50d7">66671777161</h3>
<div class="outline-text-3" id="text-orgb6c50d7">
<p>
Here, there are two states that occur more than once. I've marked the pairs here
as a and b. This means you can juggle the patterns between the As (I.e. 6671,
and 7771616), and Bs (717771, and 61666)
</p>

<pre class="example" id="orga627b7a">
1| xxxxx__
6| xxxx_x_ A
6| xxx_xx_
6| xx_xxx_ B
7| x_xxx_x
1| xxxx_x_ A
7| xxx_x_x
7| xx_x_xx
7| x_x_xxx
1| xx_xxx_ B
6| x_xxxx_
</pre>
</div>
</div>

<div id="outline-container-orgf66ea7b" class="outline-3">
<h3 id="orgf66ea7b">6316131</h3>
<div class="outline-text-3" id="text-orgf66ea7b">
<p>
Here, this siteswap has no duplicated states, and is therefore prime.
</p>
<pre class="example" id="orge1ee381">
1| xxx___
6| xx___x
3| x_x_x_
1| xx_x__
6| x_x__x
1| xx__x_
3| x_xx__
</pre>

<p>
We can also use this to make a graph of these patterns. Graphing them using
graphviz. This code prints into pretty much the Dot format used by graphviz, and the
resulting graphs are shown below.
</p>

<div class="highlight"><pre><span></span><span class="nf">printGraph</span> <span class="n">ss</span> <span class="ow">=</span> <span class="n">putStrLn</span> <span class="o">$</span> <span class="n">unlines</span> <span class="o">$</span> <span class="n">map</span> <span class="n">showSt</span> <span class="p">(</span><span class="n">grEdges</span> <span class="n">ss</span><span class="p">)</span>
  <span class="kr">where</span> <span class="n">showSt</span> <span class="p">(</span><span class="n">startSt</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">endSt</span><span class="p">)</span> <span class="ow">=</span> <span class="s">"  "</span> <span class="o">++</span> <span class="n">startSt</span> <span class="o">++</span> <span class="s">" -&gt; "</span> <span class="o">++</span> <span class="n">endSt</span>
	  <span class="o">++</span> <span class="s">" [label=</span><span class="se">\"</span><span class="s">"</span> <span class="o">++</span> <span class="p">(</span><span class="n">show</span> <span class="n">s</span><span class="p">)</span> <span class="o">++</span> <span class="s">"</span><span class="se">\"</span><span class="s">]"</span>
</pre></div>



<div id="orgc4999f2" class="figure">
<p><img src="../../images/siteswap_qs/ss1.png" alt="ss1.png"></p>
<p><span class="figure-number">Figure 1: </span>Siteswap map for 66671777161. We can see the two states we found (labeled A and B) before in the nodes with 2 input and output edges.</p>
</div>

<p>
Here we can see the results for our first part, 66671777161. Any closed loop in this is a valid
siteswap, which are (hopefully) just the 4 we found before. Pretty neat!
</p>


<div id="orgaa97953" class="figure">
<p><img src="../../images/siteswap_qs/ss2.png" alt="ss2.png"></p>
<p><span class="figure-number">Figure 2: </span>Siteswap map for 6316131</p>
</div>

<p>
As expected, \(6316131\) is prime so the graph is simply a loop with no repeated states.
</p>
</div>
</div>
</div>

<div id="outline-container-orgce95e95" class="outline-2">
<h2 id="orgce95e95">q8</h2>
<div class="outline-text-2" id="text-orgce95e95">
<p>
<i>There is 1 ground state 5 ball trick of length 1 (5), 2 of length 2</i>
<i>(55, 64), 6 of length 3 (555, 564, 645, 663, 744, 753), 24 of length</i>
<i>4, 120 of length 5, and 720 of length 6.  Clearly the pattern is N =</i>
<i>L!, which is a big hint that L elements are being permuted.  What L</i>
<i>things are permuted by ground state site swaps of length L?  (Bear in</i>
<i>mind that L is not the number of balls.)</i>
</p>


<div id="org9376d96" class="figure">
<p><img src="../../images/siteswap_qs/q8_1.png" alt="q8_1.png"></p>
<p><span class="figure-number">Figure 3: </span>A continuous 5 ball cascade, breaking for a period 4 siteswap, before resuming.</p>
</div>

<p>
Looking at siteswaps of length 4, for example. Here, we can assign a, b, c, d to
whatever we want, but we're limited with what we can connect to. The question
becomes: How many ways can we connect up the arrows to form valid patterns.
</p>

<p>
Any way that we can connect up these, so that every node has 0 or 1 throws going
to it, and the same number of throws leaving it will be a valid pattern.
</p>

<p>
We can look at each throw in turn, and see what it's possible to connect it to.
a already receives a throw, so it can't be a 0. It can't connect to b, c, d, or
the following 5 because they already have arrows connecting to them.
</p>


<div id="org1267acc" class="figure">
<p><img src="../../images/siteswap_qs/q8_2.png" alt="q8_2.png"></p>
<p><span class="figure-number">Figure 4: </span>There are 4 possible values for a, shown in red.</p>
</div>

<p>
Here, in red, are the possible throws from \(a\). \(a \in \{5,6,7,8\}\). It can be seen that b, c, and d,
can also throw to these same 4 positions. However, only one can throw to each.
We need to choose an ordering for these 4 throws to land. The number of ways to
order 4 objects is 4!. By this logic, we can see how it'll be \(l!\) for any number
of throws (until we start getting 0s… See next q).
</p>
</div>
</div>

<div id="outline-container-org31fdbde" class="outline-2">
<h2 id="org31fdbde">q9</h2>
<div class="outline-text-2" id="text-org31fdbde">
<p>
<i>There are not 7! = 5040 ground state 5 ball patterns of length 7,</i>
<i>as the above pattern would suggest (the actual number is around</i>
<i>4300). Why does the pattern break down?  Can you calculate (not by</i>
<i>brute force!) how many ground state patterns there are for L =</i>
<i>7,8,9,…?</i>
</p>

<p>
This is due to there being 0s in the pattern. As before we can connect these
arrows in any way, but sometimes in later throws we won't have a ball to throw.
</p>

<p>
Another way of approaching the previous question is to reverse it. Instead of
looking at the throws being made at a point, look instead at the number of
places the throws can come from.
look at the throws landing at a
point. a,b,c,d,e already have their throws chosen, so we're looking at the
subsequent 5 throws. Since we require a ball to land at
each of these times, we can just times together all the ways these arrows could
be directed.
</p>


<div id="org5c017a3" class="figure">
<p><img src="../../images/siteswap_qs/q9_1.png" alt="q9_1.png"></p>
</div>

<p>
Here, there are a choice of 5 throws that can land at this time. For the
following throw, there are only 4 left, and after is 3 etc. This approach leads
us to the same answer as before: n!.
</p>

<p>
Where this falls apart however is for longer sequences..
</p>


<div id="org9458d55" class="figure">
<p><img src="../../images/siteswap_qs/q9_2.png" alt="q9_2.png"></p>
<p><span class="figure-number">Figure 6: </span>f or g could be a 0, and so the arrows in blue may not be possible. This is the problem with our current method.</p>
</div>

<p>
Here, this method falls apart - we don't know if f or g will even 'contain' a
ball for us to throw. Because of this, if we were to continue the previous
method - we'd overestimate the number of siteswaps of any given length.
</p>

<p>
However, having a 0 in a pattern is pretty much the same as inserting a space
into a shorter siteswap. If we were able to work out the number of siteswaps of
a shorter length with no 0s, and then multiply it by the number of ways we could
'insert' a 0 into that siteswap… We'd be able to work out the number of
siteswaps of any given length despite there being 0s.
</p>

<p>
Here's an example of this insertion… We can create all siteswaps with 0s
similarly by adding gaps into siteswaps without 0s.
</p>

<div id="orgc161356" class="figure">
<p><img src="../../images/siteswap_qs/q9_3.png" alt="q9_3.png"></p>
</div>

<div id="org7000636" class="figure">
<p><img src="../../images/siteswap_qs/q9_4.png" alt="q9_4.png"></p>
<p><span class="figure-number">Figure 8: </span>Siteswap 504 has exactly the same arrow placement as 33, but with an added 0. All siteswaps with 0s have exactly one siteswap without 0s they map to.</p>
</div>

<p>
So with this in mind, we can calculate the total number of siteswaps of length
\(L\) by:
</p>

<div class="org-center">
<p>
\(\sum_{l=1}^{L}\) (arrow permutations of length \(l\)) \(*\) (ways to insert \(L-l\) gaps into a siteswap of length \(l\))
</p>
</div>
</div>

<div id="outline-container-orgabb1da5" class="outline-3">
<h3 id="orgabb1da5">Arrow permutations:</h3>
<div class="outline-text-3" id="text-orgabb1da5">
<p>
To work out the permutations of length l, we can use the method we had before.
We go through the catches, and work out where the throw could've come from. Now
that we've no 0s, any unassigned throw before can be used.
</p>

<p>
The first \(n\), where \(n\) is the number of balls are already determined by the
incoming cascade throws. After that, we have n throws that can land at any
point.
</p>


<div id="orgbd1be75" class="figure">
<p><img src="../../images/siteswap_qs/q9_5.png" alt="q9_5.png"></p>
<p><span class="figure-number">Figure 9: </span>The n (n = 5 here) throws that could arrive at f. After picking the throw to arrive at f, we'll still have n choices for g - since f is now a possible source.</p>
</div>

<p>
As long as the pattern is going, we have \(n\) places the throw could've been
made. We go through the siteswap from left to right, picking each throw source
in turn. Therefore, the number of possible sources remains the same - \(n\).
</p>

<p>
From the previous question, for \(n\) throws following the pattern we have one
less choice each time, totalling \(n!\).
</p>

<p>
The total number of arrow permutations therefore is
</p>

<p>
\[ p = \begin{cases}
      l! &amp; l &lt;= n \\
      n! * n^{l-n} &amp; otherwise
   \end{cases}
\]
</p>

<p>
Since we already know how many ground state siteswaps there are for \(l &lt;= n\),
(I.e. l!) we'll ignore this case for now.
</p>
</div>
</div>

<div id="outline-container-org70ebc60" class="outline-3">
<h3 id="org70ebc60">Gap insertion</h3>
<div class="outline-text-3" id="text-org70ebc60">
<p>
Given a siteswap of length \(l\) with no gaps, we're looking to insert them so as
to end up with one of length \(L, L &gt;= l\).
</p>

<p>
Another way to phrase this is to say given a sequence of length \(L\), we have to
choose positions for the \(L-l\) gaps. We can't choose
the first \(n\) places though, since the siteswap is ground state.
</p>

<p>
This is just \({L-n \choose L-l}\), as long as \({ L-n \geq L-l } \implies { l \geq
n }\). There is no way to insert gaps into a siteswap that's shorter than the
number of balls.
</p>
</div>
</div>

<div id="outline-container-org249ec3c" class="outline-3">
<h3 id="org249ec3c">Putting it all together:</h3>
<div class="outline-text-3" id="text-org249ec3c">
<p>
Lets insert what we have into the equation.
</p>
<div class="org-center">
<p>
\(\sum_{l=1}^{L}\) (arrow permutations of length \(l\)) \(*\) (ways to insert \(L-l\) gaps into a siteswap of length \(l\))
</p>
</div>

<p>
Since there are 0 ways to insert gaps into siteswaps where \(n &lt; L\), and we already know
from the previous question that the number of siteswaps in this case is \(L!\),
we'll omit this case and come back to it.
</p>

<p>
\[ s(L, n) = \sum_{l=1}^{L} \bigg[ \begin{cases}
      l! &amp; l &lt;= n \\
      n! * n^{l-n} &amp; otherwise
   \end{cases} * {L \choose l} \bigg] \]
</p>

<p>
\[ = \sum_{l=n}^{L} \bigg[n! * n^{l-n} * {L-n \choose L-l} \bigg], l \geq n \]
</p>

<p>
Which gives us the number of ground state siteswaps for a given number of balls (\(n\)) and
length (\(l, l \geq n\))! We can test it to get an answer for how many siteswaps of
length 7 there are:
</p>

<p>
\[ s(7, 5) = \sum_{l=5}^{7} \bigg[5! * 5^{l-5} * {2 \choose 7-l} \bigg] =
5!(5^0*1 + 5^1*2 + 5^2*1) = 4320 \]
</p>
</div>
</div>

<div id="outline-container-org5652571" class="outline-3">
<h3 id="org5652571">Simplify</h3>
<div class="outline-text-3" id="text-org5652571">
<p>
We can simplify this formula a lot further! First taking \(n!\) out side the sum.
</p>

<p>
\[ = n! * \sum_{l=n}^{L} \bigg[n^{l-n} * {L-n \choose L-l} \bigg] \]
</p>

<p>
Substitute \(k+n = l\)
\[ = n! * \sum_{k=0}^{L-n} \bigg[n^{k} * {L-n \choose L-k-n} \bigg] \]
</p>

<p>
Next, substitute \(L-n = d\)
\[ = n! * \sum_{k=0}^{d} \bigg[n^{k} * {d \choose d-k} \bigg] \]
</p>

<p>
Then we have:
\[ { d \choose d-k } = \frac{d!}{k!(d-k)!} = { d \choose k } \]
</p>

<p>
\[ \therefore s(l, n) = n! * \sum_{k=0}^{d} \bigg[n^{k} * {d \choose k} \bigg],
l \geq n \]
</p>

<p>
This can be simplified with the binomial theorem identity, with n = d, a = 1, b
= n.
\[ \sum_{i=0}^{n} {n \choose i} a^{n-i}b^{i} = (a+b)^n \]
</p>

<p>
\[ \therefore s(L, n) = n! * (n+1)^d \]
</p>

<p>
And reverting the substitutions
\[ \therefore s(L, n) = n! * (n+1)^{(L-n)} \]
</p>

<p>
And adding back in the case for l &lt;= n.
\[ \therefore s(L, n) = \begin{cases}
      l! &amp; l &lt;= n \\
      n! * (n+1)^{L-n} &amp; otherwise
   \end{cases} \]
</p>

<p>
Which… FINALLY gives us the the answer! Phew!
</p>
</div>
</div>
</div>

        
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" integrity="sha384-3lJUsx1TJHt7BA4udB5KPnDrlkO8T6J6v/op7ui0BbCjvZ9WqV4Xm6DTP6kQ/iBH" crossorigin="anonymous"></script><script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"] ],
        displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
        processEscapes: true
    },
    "HTML-CSS": {
        styles: {'.MathJax_Display': {"margin": 0}}
    }
});
</script>
</div>
    </div>

    
    <footer><div class="container">
            <div class="social">
                <div class="social-entry">
                    <a href="mailto:oisincar@gmail.com" target="_blank">
                        <i class="fa fa-envelope-o"></i>
                    </a>
                </div>


                <div class="social-entry">
                    <a href="https://github.com/oisincar" target="_blank">
                        <i class="fa fa-github"></i>
                    </a>
                </div>

                <div class="social-entry">
                    <a href="../../rss.xml" target="_blank">
                        <i class="fa fa-rss"></i> 
                    </a>
                </div>
            </div>
                <div class="copyright">
                    Contents © 2021         <a href="mailto:oisincar@gmail.com">Oisin Carroll</a> - Powered by         <a href="https://getnikola.com" rel="nofollow">Nikola</a>         
                    
                </div>
           
        </div>
    </footer><div id="cookies-eu-banner" style="display: none; position:fixed; bottom: 0;">
        By continuing to visit this site, you accept the use of cookies by Google Analytics and Google Adsense.
        <a href="https://imois.in/pages/privacy-policy/" id="cookies-eu-more">Read more</a>
        <button id="cookies-eu-reject">Reject</button>
        <button id="cookies-eu-accept">Accept</button>
    </div>

    
<script src="../../assets/js/cookies-eu-banner.js"></script><script>

CookiesEuBanner.prototype.setCookie = function(name, value) {
  var date = new Date();
  date.setTime(date.getTime() + this.cookieTimeout);

  document.cookie = name + '=' + value + ';expires=' + date.toGMTString() + ';path=/' + ';secure;SameSite=Lax';
}


    new CookiesEuBanner(function () {
        // Your code to launch when user accept cookies
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        console.log("Enabling google analytics!");

        ga('create', 'UA-143421297-1', 'auto');
        ga('send', 'pageview');


        // TODO: Set up adsense here..??
    }, true);

</script><script src="../../assets/js/jquery-1.10.2.min.js" type="text/javascript"></script><script src="../../assets/js/headroom.min.js" type="text/javascript"></script><script src="../../assets/js/scripts.js" type="text/javascript"></script><div>
</div>
</body>
</html>
